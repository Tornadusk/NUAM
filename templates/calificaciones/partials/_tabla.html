<!-- Tabla de Calificaciones -->
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>
            <h5 class="card-title mb-0">Resultados</h5>
            <small class="text-muted"><span id="contadorCalificaciones">0</span> calificaciones</small>
        </div>
        <div class="d-flex gap-2 flex-wrap align-items-center">
            <!-- Vista Toggle -->
            <select class="form-select form-select-sm" id="vistaToggle" style="width: auto;">
                <option value="resumen">Vista: Resumen</option>
                <option value="completa">Vista: Completa</option>
            </select>
            <!-- Botones Acciones Primarias -->
            <button class="btn btn-success btn-sm" onclick="abrirModalIngresar()">
                <i class="fas fa-plus me-1"></i> Ingresar
            </button>
            <button class="btn btn-warning btn-sm" onclick="abrirModalModificar()" id="btnModificar" disabled>
                <i class="fas fa-edit me-1"></i> Modificar
            </button>
            <button class="btn btn-danger btn-sm" onclick="eliminarCalificacion()" id="btnEliminar" disabled>
                <i class="fas fa-trash me-1"></i> Eliminar
            </button>
            <button class="btn btn-info btn-sm" onclick="copiarCalificacion()" id="btnCopiar" disabled>
                <i class="fas fa-copy me-1"></i> Copiar
            </button>
            <!-- Separador visual -->
            <div class="vr"></div>
            <!-- Botones Carga/Descarga -->
            <button class="btn btn-secondary btn-sm" onclick="abrirModalCargaFactor()">
                <i class="fas fa-file-upload me-1"></i> Carga x Factor
            </button>
            <button class="btn btn-secondary btn-sm" onclick="abrirModalCargaMonto()">
                <i class="fas fa-file-upload me-1"></i> Carga x Monto
            </button>
            <button class="btn btn-secondary btn-sm" 
                    onclick="exportarCalificacionesCSV()"
                    data-bs-toggle="tooltip" 
                    data-bs-placement="bottom"
                    title="Descarga todas las calificaciones visibles en la tabla (respetando filtros) en formato CSV">
                <i class="fas fa-download me-1"></i> Descargar CSV
            </button>
        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-sm table-hover" id="tablaCalificaciones">
                <thead class="table-light">
                    <tr>
                        <th width="30">
                            <input type="checkbox" id="selectAll" onclick="toggleSelectAll()">
                        </th>
                        <th>País</th>
                        <th>Moneda</th>
                        <th>Ejercicio</th>
                        <th>Instrumento</th>
                        <th>Fecha Pago</th>
                        <th>Descripción</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tBodyCalificaciones">
                    <tr>
                        <td colspan="9" class="text-center text-muted py-4">
                            <i class="fas fa-spinner fa-spin me-2"></i> Cargando calificaciones...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Paginación -->
        <nav>
            <ul class="pagination pagination-sm justify-content-center mb-0" id="paginacion">
            </ul>
        </nav>
    </div>
</div>

