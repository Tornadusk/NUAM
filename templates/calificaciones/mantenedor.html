{% extends 'base.html' %}
{% load static %}

{% block title %}Mantenedor de Calificaciones - NUAM{% endblock %}

{% block content %}
<!-- CSRF Token oculto para asegurar que Django establezca la cookie -->
<div style="display: none;">
    {% csrf_token %}
</div>

<div class="container-fluid">
    <!-- Page Header -->
    {% include 'calificaciones/partials/_header.html' %}

    <!-- Content Tabs -->
    {% include 'calificaciones/partials/_tabs_nav.html' %}

    <!-- Tab Content -->
    <div class="tab-content" id="mainTabsContent">
        <!-- Mantenedor Tab -->
        <div class="tab-pane fade show active" id="mantenedor" role="tabpanel">
            <!-- Filtros -->
            {% include 'calificaciones/partials/_filtros.html' %}

            <!-- Tabla de Calificaciones -->
            {% include 'calificaciones/partials/_tabla.html' %}

            <!-- KPIs y Auditoría -->
            {% include 'calificaciones/partials/_kpis_auditoria.html' %}
        </div>

        <!-- Cargas Masivas Tab -->
        {% include 'calificaciones/partials/_cargas_masivas.html' %}

        <!-- Usuarios Tab (Solo Administrador) -->
        {% include 'calificaciones/partials/_usuarios.html' %}

        <!-- Auditoría Tab (Solo Administrador) -->
        {% include 'calificaciones/partials/_auditoria.html' %}

        <!-- Reportes Tab -->
        {% include 'calificaciones/partials/_reportes.html' %}
    </div>
</div>

<!-- Modales de Calificaciones -->
{% include 'calificaciones/partials/_modals_calificaciones.html' %}

<!-- Modales de Usuarios (Solo Administrador) -->
{% include 'calificaciones/partials/_modals_usuarios.html' %}

{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'js/mantenedor/init.js' %}"></script>
{% endblock %}
